<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Before / After Slider</title>
<style>
  :root{--w:800px;--h:450px}
  body{display:flex;align-items:center;justify-content:center;height:100vh;margin:0;background:#111;color:#fff;font-family:system-ui,Segoe UI,Roboto}
  .container{width:clamp(280px,var(--w),100%);max-width:100%;aspect-ratio:16/9;position:relative;user-select:none}
  .img{position:absolute;inset:0;overflow:hidden;border-radius:8px;box-shadow:0 6px 30px rgba(0,0,0,.6)}
  .img img{width:100%;height:100%;object-fit:cover;display:block}
  .overlay{position:absolute;inset:0;display:flex;align-items:center;justify-content:flex-start}
  .overlay .reveal{height:100%;width:50%;background:transparent;overflow:hidden}
  .divider{position:absolute;left:50%;top:0;bottom:0;width:0;display:flex;align-items:center;justify-content:center;transform:translateX(-50%)}
  .bar{width:2px;height:100%;background:rgba(255,255,255,.9)}
  .handle{position:relative;margin-top:0;background:#fff;border-radius:999px;width:34px;height:34px;display:flex;align-items:center;justify-content:center;box-shadow:0 4px 14px rgba(0,0,0,.4);transform:translateX(-50%)}
  .handle:after{content:"";display:block;width:18px;height:2px;background:#333;border-radius:2px}
  .label{position:absolute;top:12px;padding:6px 10px;border-radius:6px;background:rgba(0,0,0,.5);font-size:13px}
  .label.left{left:12px}
  .label.right{right:12px}
  .hint{position:absolute;bottom:12px;left:50%;transform:translateX(-50%);font-size:13px;padding:6px 10px;background:rgba(0,0,0,.45);border-radius:6px}
</style>
</head>
<body>
<div class="container" id="slider">
  <div class="img">
    <img src="https://images.unsplash.com/photo-1507525428034-b723cf961d3e?q=80&w=1600&auto=format&fit=crop" alt="Before">
  </div>

  <div class="img overlay" aria-hidden="true">
    <div class="reveal" id="reveal">
      <img src="https://images.unsplash.com/photo-1501785888041-af3ef285b470?q=80&w=1600&auto=format&fit=crop" alt="After">
    </div>
  </div>

  <div class="divider" id="divider" aria-hidden="true">
    <div class="bar"></div>
    <div class="handle" id="handle" style="margin-left:0"></div>
  </div>

  <div class="label left">Before</div>
  <div class="label right">After</div>
  <div class="hint">Drag or tap to reveal</div>
</div>

<script>
(function(){
  const container = document.getElementById('slider');
  const reveal = document.getElementById('reveal');
  const divider = document.getElementById('divider');
  const handle = document.getElementById('handle');

  let rect, dragging = false;

  function update(posX){
    const x = Math.max(0, Math.min(posX - rect.left, rect.width));
    const pct = x / rect.width * 100;
    reveal.style.width = pct + '%';
    divider.style.left = pct + '%';
  }

  function start(e){
    rect = container.getBoundingClientRect();
    dragging = true;
    container.classList.add('dragging');
    move(e);
  }
  function move(e){
    if(!dragging) return;
    const clientX = e.touches ? e.touches[0].clientX : e.clientX;
    update(clientX);
  }
  function end(){
    dragging = false;
    container.classList.remove('dragging');
  }

  // init at center
  window.addEventListener('load', ()=>{ rect = container.getBoundingClientRect(); update(rect.left + rect.width/2); });
  // pointer/mouse/touch events
  handle.addEventListener('pointerdown', start);
  divider.addEventListener('pointerdown', start);
  container.addEventListener('pointermove', move);
  window.addEventListener('pointerup', end);

  // touch fallback for older browsers
  handle.addEventListener('touchstart', start, {passive:true});
  container.addEventListener('touchmove', move, {passive:true});
  window.addEventListener('touchend', end);

  // keyboard accessibility
  handle.setAttribute('tabindex','0');
  handle.addEventListener('keydown', (e)=>{
    rect = container.getBoundingClientRect();
    const step = rect.width * 0.05;
    if(e.key === 'ArrowLeft') update((divider.getBoundingClientRect().left - rect.left) - step + rect.left);
    if(e.key === 'ArrowRight') update((divider.getBoundingClientRect().left - rect.left) + step + rect.left);
    if(e.key === 'Home') update(rect.left);
    if(e.key === 'End') update(rect.left + rect.width);
  });
})();
</script>